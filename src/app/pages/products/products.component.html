<div class="d-flex justify-content-end">
    <button  nbButton  hero status="primary" class="pull-right" (click)="openWindow(contentTemplate)">
      <i class="fas fa-dolly mr-3"></i> New Product
    </button>
  
  </div>

<div class="row mt-5">
    <div class="col-lg-12">
      <nb-card>
        <nb-card-header>Product Management </nb-card-header>
        <nb-card-body>
       
          <table class="table table-striped">
            <thead>
              <tr>
              <th><p><b>Image</b></p></th>
              <th><p><b>Product Name</b></p></th>
              <th><p><b>stock</b></p></th>
              <th><p><b>Product Price රු</b></p></th>
              <th><p><b>Discount Price රු</b></p></th>
              <th><p><b>Action</b></p></th>
            </tr>
            </thead>
            <tbody>
              <tr *ngFor="let items of productData">
                <td style="height: 10%;width: 20%;"><img class="img-fluid"  src= "{{items.image}}" style="height: 100px;width: 100%;"/></td>
                <td><p>{{items.productName}}</p></td>
                <td *ngIf="items.productStatus==1"><p>In Stock</p></td>
                <td *ngIf="items.productStatus==2"><p style="color:red">Out of Stock</p></td>
                <td><p>{{items.productPrice}}</p></td>
                <td><p>{{items.productDiscount}}</p></td>
                <td>
                  <div class="d-flex">
                  <p (click)="setValuesEdit(items.image,items.productName,items.productPrice,items.productDiscount,items.productDescription,items.productStatus,items.id); openWindowEdit(edittemplate); "><i class="nb-edit" style="font-size: xx-large;"></i></p>
                  <p><i class="nb-trash"  style="font-size: xx-large;"></i></p>
                </div>
                </td>
              </tr>
          
            </tbody>

          </table>
 
        </nb-card-body>
      </nb-card>
 
      </div></div>



      <ng-template  class="window" #contentTemplate let-data>
        <p >Add Product Image</p>
<!-- <form #productForm="ngForm" (ngSubmit)="onProductSubmit(productForm.value)"> -->
  <form [formGroup]="addProducts" >
        <div class="row">
          <div class="col-sm-6">
            <ngx-image-uploader [options]="options" (upload)="onUpload($event)"></ngx-image-uploader>

          </div>
          <div class="col-sm-6">
            <div class="form-group">
              <label for="inputLastName" class="label">Select Catergory</label>
              <nb-select  selected="1" fullWidth shape="semi-round" formControlName="productCatergory">
                <nb-option value="1">Select catergory</nb-option>
                <nb-option value="2">Option 2</nb-option>
              </nb-select>
            </div>


            <div class="form-group">
              <label for="inputLastName" class="label">Product Name</label>
              <input  type="text" nbInput fullWidth shape="semi-round" id="productName" placeholder="Product Name" formControlName="productName">
            </div>


          </div>
        </div>


        <div class="row">
          <div class="col-sm-6">
            <div class="form-group">
              <label for="inputLastName" class="label">Product Price රු</label>
              <input  type="number" nbInput fullWidth shape="semi-round" id="productPrice" placeholder="Product price" formControlName="productPrice">
            </div>

          </div>
          <div class="col-sm-6">
     


            <div class="form-group">
              <label for="inputLastName" class="label">Product Discount රු</label>
              <input  type="number" nbInput fullWidth shape="semi-round" id="productDiscount" placeholder="Product discount" formControlName="productDiscount">
            </div>


          </div>
        </div>

        <textarea  rows="5" nbInput fullWidth shape="round"  placeholder="Add a product description..." formControlName="productDescription"></textarea>

        <div class="d-flex justify-content-end mt-3">
          <button  nbButton  hero status="success" class="pull-right" (click)="onProductSubmit()">
             Save
          </button>
        
        </div>
      </form>
      </ng-template>
      
      <ng-template #disabledEsc>
        Disabled close on escape click.
      </ng-template>
      



      <ng-template  class="window" #edittemplate let-data>
       
<!-- <form #productForm="ngForm" (ngSubmit)="onProductSubmit(productForm.value)"> -->
  <form [formGroup]="EditProducts" >
        <div class="row">
          <div class="col-sm-6 text-center" *ngIf="!updateImage">
          <img src="{{productEditImage}}" style="width: 220px;"/>
          <button nbButton  hero status="secondary" (click)="UpdateImageFunction()">Update Image</button>
        </div>

          <div class="col-sm-6" *ngIf="updateImage">
            <ngx-image-uploader [options]="options" (upload)="onUploadEdit($event)"></ngx-image-uploader>

          </div>
          <div class="col-sm-6 ">
            <div class="form-group">
              <label for="inputLastName" class="label">Select Catergory</label>
              <nb-select fullWidth shape="semi-round" formControlName="productCatergoryEdit" >
                <nb-option value="1">Select catergory</nb-option>
                <nb-option value="2">Option 2</nb-option>
              </nb-select>
            </div>


            <div class="form-group">
              <label for="inputLastName" class="label">Select Stock</label>
              <nb-select fullWidth shape="semi-round" formControlName="productStockEdit" >
                <nb-option value="1">In Stock</nb-option>
                <nb-option value="2">Out of Stock</nb-option>
              </nb-select>
            </div>


            <div class="form-group">
              <label  for="inputLastName" class="label">Product Name</label>
              <input type="text" nbInput fullWidth shape="semi-round"  placeholder="Product Name" formControlName="productNameEdit">
            </div>


          </div>
        </div>


        <div class="row">
          <div class="col-sm-6">
            <div class="form-group">
              <label for="inputLastName" class="label">Product Price රු</label>
              <input  type="number" nbInput fullWidth shape="semi-round"  placeholder="Product price" formControlName="productPriceEdit">
            </div>

          </div>
          <div class="col-sm-6">
     


            <div class="form-group">
              <label for="inputLastName" class="label">Product Discount රු</label>
              <input type="number" nbInput fullWidth shape="semi-round"  placeholder="Product discount" formControlName="productDiscountEdit">
            </div>


          </div>
        </div>

        <textarea  rows="5" nbInput fullWidth shape="round"  placeholder="Add a product description..." formControlName="productDescriptionEdit" ></textarea>

        <div class="d-flex justify-content-end mt-3">
          <button  nbButton  hero status="success" class="pull-right" (click)="onProductUpdate()">
             Update
          </button>
        
        </div>
      </form>
      </ng-template>